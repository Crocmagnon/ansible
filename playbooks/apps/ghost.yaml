---
- name: Ghost config
  hosts: vps
  gather_facts: false
  tasks:
    - name: Update ghost-cli
      become: true
      community.general.npm:
        global: true
        name: ghost-cli
        state: latest
    - name: Setup ghost voyages-lois.augendre.info
      ansible.builtin.include_role:
        name: ghost
      vars:
        ghost_filename: voyages-lois-augendre-info-config.json.j2
        ghost_site: voyages-lois.augendre.info
        ghost_systemctl_service: ghost_voyages-lois-augendre-info.service
        ghost_db_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62353834396534383164313434653935313835623163303334356532336561643732643564366461
          3238346564383038646461636466373661613537663062380a346164613730303430363232353865
          33376565363662363332636631326535333536643563333961663639626236666438323362626133
          3764363233326563610a663031626162343932666261653235653062336436333362393561313461
          30316163313662373264626330666237643264643430326465613262303962376530
        ghost_mail_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35353737376566653462393530613034353763643166626432613836663638636562303762343133
          6132313762353565646531613336663336313765623430310a616438613433333632343933373330
          62356661626437306265313061636634613263613633353433653330653862633639376462353637
          3739313432356262330a626432386536663638646539323861356564616436386464366333303564
          35303230623365636362323733623531343335376361313430373936663836353132643834643664
          6163326436323961636462616430366364626532323861656436
